<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GeoVista | Explore the World</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

   <style>
  /* Reset and base styles */
  * {
    box-sizing: border-box;
  }

  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    scroll-behavior: smooth;
    overflow-x: hidden; /* remove horizontal scroll */
    background-color: #000; /* fallback color behind everything */
  }

  body {
    font-family: 'Lora', serif;
    background-color: #f5f5f5;
    }

  /* Navbar */
  nav.navbar {
    background: rgba(0, 0, 0, 0.7);
  }

  nav.navbar a {
    color: #fff;
    font-weight: 600;
    transition: 0.3s;
  }

  nav.navbar a:hover {
    color: #00bcd4;
  }

  /* Hero Section (only this has the map background) */
  .hero {
    min-height: 100vh;
    background: url("/static/images/map.png") no-repeat center center fixed;
    background-size: cover;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: #fff;
    overflow: hidden;
  }
  .results-section {
      min-height: 60vh;
      background: url("/static/images/map.png") no-repeat center center fixed;
      background-size: cover;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 0;
      color: #fff;
      overflow: hidden;
  }

    .results-section::before {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.55); /* same overlay as hero */
      z-index: 0;
    }

    .results-section > * {
      position: relative;
      z-index: 1;
    }
  .hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.55);
    z-index: 0;
  }

  .hero-content {
    position: relative;
    z-index: 1;
    max-width: 600px;
    width: 90%;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  }

  .hero h1 {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 15px;
  }

  .hero p {
    font-size: 1.2rem;
    margin-bottom: 30px;
    color: #ddd;
  }

  .hero .form-control {
    border-radius: 50px;
    padding: 15px 20px;
    margin-bottom: 15px;
  }

  .hero .btn-search {
    border-radius: 50px;
    padding: 15px 20px;
    font-weight: 600;
    background: #00bcd4;
    border: none;
    transition: all 0.3s ease;
  }

  .hero .btn-search:hover {
    background: #0097a7;
    transform: translateY(-2px);
  }
  .hero.compact {
    min-height: 30vh; 
  }

  /* Sections (like About, Cities, Contact) */
  .section {
    padding: 80px 0;
    background-color: #c7d4da; /* Light bg for each section */
    color: #222;
  }

  .section h2 {
    font-weight: 700;
    text-align: center;
    margin-bottom: 50px;
  }

  .city-card {
    border-radius: 20px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    position: relative;
  }

  .city-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .city-card:hover img {
    transform: scale(1.05);
  }

  .city-card .overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(0deg, rgba(0,0,0,0.6), rgba(0,0,0,0));
    color: #fff;
    display: flex;
    align-items: flex-end;
    padding: 15px;
  }

  /* Footer */
  footer {
    background: #111;
    color: #ccc;
    padding: 30px 0;
    text-align: center;
  }

  footer a {
    color: #00bcd4;
    margin: 0 8px;
    text-decoration: none;
  }

  footer a:hover {
    text-decoration: underline;
  }

  /* Fix white edges when scrolling */
  body, html {
    background-color: #000;
  }

  .hero, .section, footer {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
  }
  .weather-result {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 15px;
    display: inline-block;
    color: #fff;
  }
  .weather-card {
    position: relative;
    z-index: 2;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    padding: 25px 40px;
    border-radius: 25px;
    color: #fff;
    box-shadow: 0 8px 25px rgba(0,0,0,0.35);
  }

    .weather-card:hover {
    transform: translateY(-5px);
    }

    .weather-card h4, 
    .weather-card h2, 
    .weather-card p {
    margin: 10px 0;
    }
    .weather-card h4 {
    margin-bottom: 15px;
   }
   
  .weather-card img {
    width: 100px;
    height: 100px;
    }
    .weather-card h2 {
    font-size: 2.5rem;
    margin: 10px 0;
    }
    .weather-card p {
    font-size: 1.2rem;
    margin-bottom: 0;
    text-transform: capitalize;
    }

    .weather-card img {
      width: 100px;
      height: 100px;
      filter: brightness(1.8) contrast(1.3);
    }

    .results-card {
    position: relative;
    z-index: 2; /* make sure it sits above hero overlay */
    background: rgba(255, 255, 255, 0.15); /* slightly transparent */
    backdrop-filter: blur(10px); /* nice glass effect */
    padding: 20px 30px;
    border-radius: 20px;
    margin-top: 20px;
    color: #fff;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }
    .results-section {
      margin-top: -80px !important; /* pulls results upward */
      padding-top: 20px !important; 
    }
    #popular .row {
      padding: 0 60px;  /* adjust this for more/less spacing */
    }
    #contact form {
      background: #fff;
      padding: 40px 50px;
      border-radius: 15px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      max-width: 600px;
      margin: 0 auto 50px;
    }
    #contact .form-control {
      border-radius: 8px;
      border: 1px solid #ccc;
      padding: 10px 15px;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    #contact .form-control:focus {
      border-color: #00bcd4;
      box-shadow: 0 0 5px rgba(0, 188, 212, 0.3);
    }
    #contact button {
      background-color: #00bcd4 !important;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    #contact button:hover {
      background-color: #009fb5 !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0, 188, 212, 0.4);
    }
    #contact {
      background: linear-gradient(180deg, #f7fbfd 0%, #e6f4f8 100%);
      padding: 100px 0;
    }
    .contact-info {
      background: #fff;
      padding: 25px 40px;
      border-radius: 12px;
      display: inline-block;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }
    section#contact {
      padding-bottom: 50px !important;
    }

    /* Bring contact info closer to the form */
    #contact .mt-5 {
      margin-top: 20px !important;
    }

    /* Optional: tighten the paragraph spacing inside contact info */
    #contact .mt-5 p {
      margin-bottom: 4px;
    }

    .search-history {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 15px;
      padding: 15px 20px;
      margin-top: 20px;
      text-align: left;
    }
    .search-history li {
      font-size: 1rem;
    }
    .search-history li:hover {
      color: #00bcd4;
      cursor: pointer;
    }

    .recent-search:hover {
      color: #00bcd4 !important;
      transform: scale(1.02);
      transition: all 0.2s ease;
    }

    .thankyou-message {
      font-size: 1.05rem;
      color: #0b0c0c;
      font-weight: 600;
      background: none;
      border: none;
      margin-top: 15px;
      animation: fadeIn 0.8s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

</style>

</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#" style="display: flex; align-items: center; gap: 8px; text-decoration: none;">
        <i class="fa-solid fa-globe" style="color:#00bcd4; font-size:1.6rem;"></i>
        <span style="font-weight:700; font-size:1.4rem;">GeoVista</span>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#hero">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#popular">Popular Cities</a></li>
          <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

 <!-- Hero Section -->
    <section id="hero" class="hero {% if city or weather %}compact{% endif %}">
      <div class="hero-content">
        <h1 style="display: flex; align-items: center; justify-content: center; gap: 10px;">
          <i class="fa-solid fa-globe" style="color:#00bcd4; font-size:3rem;"></i>
          <span style="font-weight:700; font-size:3rem;">GeoVista</span>
        </h1>

        <p>Discover cities and experiences around the world</p>
        <form action="/search" method="get">
          <input type="text" name="city" class="form-control" placeholder="Enter city" required>
          <input type="text" name="country" class="form-control" placeholder="Enter country (optional)">
          <button type="submit" class="btn btn-search w-100">Search</button>
        </form>

        {% if searches %}
          <div class="search-history mt-4">
            <h5 style="color:#00bcd4; font-weight:600;">Recent Searches</h5>
            <ul style="list-style:none; padding:0; margin-top:10px;">
              {% for item in searches %}
                <li 
                  style="color:#fff; margin-bottom:5px; cursor:pointer;" 
                  class="recent-search"
                  data-city="{{ item[0] }}" 
                  data-country="{{ item[1] if item[1] else '' }}"
                >
                  <i class="fa-solid fa-clock" style="color:#00bcd4; margin-right:8px;"></i>
                  {{ item[0] }}{% if item[1] %}, {{ item[1] }}{% endif %}
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      </div>
    </section>

    {% if city or weather %}
    <section class="results-section">
      {% if city %}
        <div class="d-flex justify-content-center w-100">
          <div class="results-card text-center">
            <h3>You searched for : {{ city }}{% if country %}, {{ country }}{% endif %}</h3>
          </div>
        </div>
      {% endif %}

      {% if weather %}
        <div class="d-flex justify-content-center mt-5 w-100">
          <div class="weather-card text-center">
            <h4>Weather in {{ city }}{% if country %}, {{ country }}{% endif %}</h4>
            <img src="http://openweathermap.org/img/wn/{{ weather.icon }}@2x.png" alt="weather icon">
            <h2>{{ weather.temp }} Â°C</h2>
            <p class="text-capitalize">{{ weather.description }}</p>
          </div>
        </div>
      {% endif %}
    </section>
    {% endif %}
  
  <!-- Popular Cities Section -->
  <section id="popular" class="section" style="background-color: #ecf7fc;">
    <h2 style="color:#000; font-weight:700; margin-bottom:30px;">
      <i class="fa-solid fa-map-location-dot" style="color:#00bcd4; margin-right:10px;"></i>
      Popular Cities
    </h2>

      <div class="row g-4">
        <div class="col-md-4">
          <div class="city-card">
            <img src="/static/images/paris.jpeg" alt="Paris">
            <div class="overlay">
              <h5>Paris</h5>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="city-card">
            <img src="/static/images/mumbai.jpeg" alt="Mumbai">
            <div class="overlay">
              <h5>Mumbai</h5>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="city-card">
            <img src="/static/images/newyork.png" alt="New York">
            <div class="overlay">
              <h5>New York</h5>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" style="padding: 100px 0; background-color: #cae7f1; color: #222;">
      <div class="container text-center">
        <h2 style="font-weight: 700; margin-bottom: 40px;">
          <i class="fa-solid fa-circle-info" style="color:#00bcd4; margin-right:10px;"></i>
          About GeoVista
        </h2>

        <p style="max-width: 750px; margin: 0 auto 60px; font-size: 1.1rem; line-height: 1.8;">
          GeoVista is your digital travel companion that helps you explore cities around the world with just a click. 
          From current weather updates to immersive visuals, GeoVista transforms your curiosity into a real-time journey for data-driven discovery.
        </p>

        <div class="row g-4 justify-content-center">
          <div class="col-md-4">
            <div style="background: #fff; border-radius: 15px; padding: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
              <h4 style="color:#00bcd4; font-weight:600;">
                <i class="fa-solid fa-compass" style="color:#00bcd4; margin-right:8px;"></i>
                Mission
              </h4>

              <p>To make global exploration simple and meaningful through real-time data.</p>
            </div>
          </div>
          <div class="col-md-4">
            <div style="background: #fff; border-radius: 15px; padding: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
              <h4 style="color:#00bcd4; font-weight:600;">
                <i class="fa-solid fa-lightbulb" style="color:#00bcd4; margin-right:8px;"></i>
                Vision
              </h4>

              <p>To inspire curiosity and make every user feel connected to cities across the globe.</p>
            </div>
          </div>
          <div class="col-md-4">
            <div style="background: #fff; border-radius: 15px; padding: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
              <h4 style="color:#00bcd4; font-weight:600;">
                <i class="fa-solid fa-gear" style="color:#00bcd4; margin-right:8px;"></i>
                Technology
              </h4>

              <p>Built with Flask, SQLite, and OpenWeather API for a seamless web experience.</p>
            </div>
          </div>
        </div>
      </div>
  </section>
  <!-- Contact Section -->
   <section id="contact" style="padding: 100px 0; background-color: #c7e8f9; color: #222;">
      <div class="container text-center">
        <h2 style="font-weight: 700; margin-bottom: 40px;">
          <i class="fa-solid fa-envelope" style="color:#00bcd4; margin-right:10px;"></i>
          Get in Touch
        </h2>
        <p style="max-width: 700px; margin: 0 auto 50px; font-size: 1.1rem; line-height: 1.8;">
          Have feedback, ideas, or want to collaborate? Weâ€™d love to hear from you.
        </p>

        <form id="contactForm" action="/contact" method="post" style="max-width: 500px; margin: auto; text-align: left;">
          <div class="mb-3">
            <label class="form-label">Name</label>
            <input type="text" name="name" class="form-control" placeholder="Your Name" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-control" placeholder="Your Email" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Message</label>
            <textarea name="message" class="form-control" rows="4" placeholder="Your Message" required></textarea>
          </div>
          <div class="text-center mt-4">
            <button type="submit" class="btn btn-primary px-5 py-2"
              style="background-color: #00bcd4; border: none;">Send</button>
          </div>
        </form>

        {% if success %}
          <p class="thankyou-message mt-4">
             Thank you for reaching out! Weâ€™ll get back to you soon.
          </p>
        {% endif %}

        <div class="mt-5">
          <p><strong>Email:</strong> support@geovista.com</p>
          <p><strong>Location:</strong> Bengaluru, India</p>
        </div>
      </div>
    </section>

  <!-- Footer -->
  <footer>
    &copy; 2025 GeoVista. All rights reserved. 
    <br>
    <a href="#"><i class="bi bi-facebook"></i></a>
    <a href="#"><i class="bi bi-twitter"></i></a>
    <a href="#"><i class="bi bi-instagram"></i></a>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // ----------------------------
      // ðŸŒ SEARCH FORM HANDLING
      // ----------------------------
      const form = document.querySelector("form[action='/search']");
      if (form) {
        form.addEventListener("submit", async (event) => {
          event.preventDefault(); // stop page reload

          const city = form.city.value.trim();
          const country = form.country.value.trim();
          if (!city) return;

          const response = await fetch(`/search?city=${city}&country=${country}`);
          const html = await response.text();

          const parser = new DOMParser();
          const doc = parser.parseFromString(html, "text/html");
          const newResults = doc.querySelector(".results-section");

          const currentResults = document.querySelector(".results-section");
          if (currentResults) {
            currentResults.replaceWith(newResults);
          } else {
            form.closest("section").insertAdjacentElement("afterend", newResults);
          }

          newResults.scrollIntoView({ behavior: "smooth" });
        });
      }

      // ----------------------------
      // ðŸ•“ RECENT SEARCH CLICK HANDLING
      // ----------------------------
      document.addEventListener("click", (e) => {
        const item = e.target.closest(".recent-search");
        if (!item) return;

        const city = item.getAttribute("data-city");
        const country = item.getAttribute("data-country");
        if (!city) return;

        const cityInput = document.querySelector("input[name='city']");
        const countryInput = document.querySelector("input[name='country']");
        cityInput.value = city;
        countryInput.value = country;

        const form = document.querySelector("form[action='/search']");
        form.requestSubmit();

        setTimeout(() => {
          const results = document.querySelector(".results-section");
          if (results) results.scrollIntoView({ behavior: "smooth" });
        }, 500);
      });

      // ----------------------------
      // ðŸ’Œ CONTACT FORM AJAX HANDLING
      // ----------------------------
      const contactForm = document.getElementById("contactForm");
      if (contactForm) {
        contactForm.addEventListener("submit", async (e) => {
          e.preventDefault(); // prevent full page reload

          const formData = new FormData(contactForm);

          // send data to Flask backend
          const response = await fetch("/contact", {
            method: "POST",
            body: formData,
          });

          const html = await response.text();
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, "text/html");

          const newContactSection = doc.querySelector("#contact");
          const currentContactSection = document.querySelector("#contact");

          if (newContactSection && currentContactSection) {
            currentContactSection.replaceWith(newContactSection);
            newContactSection.scrollIntoView({ behavior: "smooth" });

            // ðŸ•’ After 3s: fade out thank-you message, then restore form
            setTimeout(async () => {
              const thankyouMsg = newContactSection.querySelector(".thankyou-message");
              if (thankyouMsg) {
                thankyouMsg.style.transition = "opacity 0.6s ease";
                thankyouMsg.style.opacity = "0";

                setTimeout(async () => {
                  // Fetch a fresh version of the contact section
                  const refreshed = await fetch(window.location.href);
                  const refreshedHTML = await refreshed.text();
                  const refreshedDoc = new DOMParser().parseFromString(refreshedHTML, "text/html");
                  const freshContact = refreshedDoc.querySelector("#contact");

                  if (freshContact) {
                    newContactSection.replaceWith(freshContact);
                    freshContact.scrollIntoView({ behavior: "smooth" });
                  }
                }, 600);
              }
            }, 3000);
          }
        });
      }
    });
  </script>

</body>
</html>
